{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Emergency Safety Alert Platform - Frontend Implementation",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Create a landing page with safety-focused caption and prominent 'Check Here for Safety' button",
      "acceptanceCriteria": [
        "Landing page displays an impactful safety message",
        "Prominent 'Check Here for Safety' button is clearly visible",
        "Button leads to the emergency alert flow"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/LandingPage.tsx",
          "operation": "create",
          "description": "Create landing page component with hero section displaying the safety shield logo (frontend/public/assets/generated/safety-shield.dim_256x256.png), compelling safety-focused heading, explanatory text about the emergency alert system, and a prominent 'Check Here for Safety' call-to-action button that navigates authenticated users to the dashboard or prompts unauthenticated users to sign in"
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for LandingPage as the root path ('/') and wire it into the router configuration"
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Implement dual authentication with role-based sign-up and sign-in for 'People' and 'Officer' user types",
      "acceptanceCriteria": [
        "Sign-up page allows users to select their role: 'People' or 'Officer'",
        "Separate registration flows for citizens and police officers",
        "Sign-in page authenticates users based on their registered role",
        "User role is stored and validated on backend"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/AuthPage.tsx",
          "operation": "create",
          "description": "Create authentication page that integrates Internet Identity login using the authorization component. Display the police badge icon (frontend/public/assets/generated/police-badge.dim_96x96.png) for officer authentication. After successful login via Internet Identity, check if user has a profile; if not, show role selection (People/Officer) before proceeding to registration. Use the authorization component to support authentication. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/RoleSelector.tsx",
          "operation": "create",
          "description": "Create role selector component allowing users to choose between 'People' (citizen) and 'Officer' (police) roles during first-time registration, with clear visual distinction between the two options"
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for AuthPage at '/auth' and wire it into the router configuration"
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Create user registration form collecting name and mobile number for both citizen and officer sign-ups",
      "acceptanceCriteria": [
        "Registration form includes name input field",
        "Registration form includes mobile number input field",
        "Form validates mobile number format",
        "User data is stored securely in backend"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/RegistrationForm.tsx",
          "operation": "create",
          "description": "Create registration form component with name input, mobile number input with format validation (e.g., phone number pattern), and role display. On submit, call the backend register method with name, mobile, and userType (from role selection), then call saveCallerUserProfile to store the profile. Handle validation errors and display success feedback"
        },
        {
          "path": "frontend/src/hooks/useRegistration.ts",
          "operation": "create",
          "description": "Create custom hook wrapping the backend register and saveCallerUserProfile methods, managing registration state (loading, error, success) and providing a registration mutation function"
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Implement location access request with clear permission messaging when citizen initiates emergency alert",
      "acceptanceCriteria": [
        "Browser prompts for location permission when user initiates alert",
        "Clear message explains why location access is needed",
        "Location permission state is tracked",
        "Fallback message if location is denied"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/LocationPermissionModal.tsx",
          "operation": "create",
          "description": "Create modal component that displays before emergency alert submission, showing the location pin icon (frontend/public/assets/generated/location-pin.dim_64x64.png) and clear message 'Allow location access to check where you are', with buttons to grant or deny permission. On grant, request browser geolocation permission and track permission state"
        },
        {
          "path": "frontend/src/hooks/useGeolocation.ts",
          "operation": "create",
          "description": "Create custom hook that manages geolocation permission state, requests browser location access, retrieves current GPS coordinates (latitude/longitude), handles permission denied scenarios, and provides location data to components"
        }
      ]
    },
    {
      "id": "REQ-5",
      "summary": "Capture and transmit citizen's exact live location when sending help request",
      "acceptanceCriteria": [
        "System captures GPS coordinates when help request is sent",
        "Location data is transmitted to backend",
        "Backend identifies nearest police station or officers",
        "Help request includes accurate location coordinates"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/EmergencyAlertButton.tsx",
          "operation": "create",
          "description": "Create emergency alert button component displaying the emergency alert icon (frontend/public/assets/generated/emergency-icon.dim_128x128.png) with red and white color scheme. On click, trigger location permission check, capture GPS coordinates using useGeolocation hook, and call backend sendSosRequest with location data. Show loading state during submission and success/error feedback"
        },
        {
          "path": "frontend/src/hooks/useSendSosRequest.ts",
          "operation": "create",
          "description": "Create custom hook wrapping the backend sendSosRequest method, managing submission state and providing a mutation function that accepts location coordinates"
        },
        {
          "path": "frontend/src/pages/CitizenDashboard.tsx",
          "operation": "create",
          "description": "Create citizen dashboard page featuring the EmergencyAlertButton prominently, displaying current request status if one exists, and showing help request history for the logged-in citizen"
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for CitizenDashboard at '/citizen-dashboard' with authentication guard ensuring only logged-in citizens can access"
        }
      ]
    },
    {
      "id": "REQ-6",
      "summary": "Build police officer dashboard receiving emergency help requests with location, name, mobile number, and accept functionality",
      "acceptanceCriteria": [
        "Police dashboard shows incoming help requests in real-time",
        "Each request displays citizen name, mobile number, and location",
        "Officers can accept help requests",
        "Dashboard updates when requests are accepted or resolved"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/OfficerDashboard.tsx",
          "operation": "create",
          "description": "Create officer dashboard page displaying list of help requests fetched from backend getAllRequests or getRequestsByStatus methods. For each request, show citizen name, mobile number, location coordinates with the location pin icon (frontend/public/assets/generated/location-pin.dim_64x64.png), request status, and an 'Accept' button for pending requests. Use polling or manual refresh to update the list"
        },
        {
          "path": "frontend/src/components/HelpRequestCard.tsx",
          "operation": "create",
          "description": "Create help request card component displaying individual request details (citizen name, mobile, location, timestamp, status) with conditional rendering of action buttons based on request status. Include 'Accept' button for pending requests that calls acceptHelpRequest backend method"
        },
        {
          "path": "frontend/src/hooks/useHelpRequests.ts",
          "operation": "create",
          "description": "Create custom hook wrapping backend getAllRequests and getRequestsByStatus methods, managing request list state and providing query functions for fetching help requests"
        },
        {
          "path": "frontend/src/hooks/useAcceptHelpRequest.ts",
          "operation": "create",
          "description": "Create custom hook wrapping backend acceptHelpRequest method, managing acceptance state and providing mutation function that accepts requestId"
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for OfficerDashboard at '/officer-dashboard' with authentication guard ensuring only logged-in officers can access"
        }
      ]
    },
    {
      "id": "REQ-7",
      "summary": "Implement real-time notification system alerting officers of new requests and citizens when requests are accepted",
      "acceptanceCriteria": [
        "Police officers receive browser notifications for new help requests",
        "Citizens receive notification when officer accepts their request",
        "Notifications include essential alert information",
        "Notification permissions are requested appropriately"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useNotifications.ts",
          "operation": "create",
          "description": "Create custom hook managing browser notification permissions, requesting notification access on component mount, and providing a function to trigger notifications with title and body content"
        },
        {
          "path": "frontend/src/components/NotificationManager.tsx",
          "operation": "create",
          "description": "Create notification manager component that polls for request updates, detects new help requests for officers and status changes for citizens, and triggers browser notifications using useNotifications hook"
        },
        {
          "path": "frontend/src/pages/OfficerDashboard.tsx",
          "operation": "modify",
          "description": "Integrate NotificationManager component to enable real-time notifications for new help requests on the officer dashboard"
        },
        {
          "path": "frontend/src/pages/CitizenDashboard.tsx",
          "operation": "modify",
          "description": "Integrate NotificationManager component to enable notifications when officer accepts the citizen's help request"
        }
      ]
    },
    {
      "id": "REQ-8",
      "summary": "Add in-app calling functionality enabling officers to call citizen's mobile number from help request interface",
      "acceptanceCriteria": [
        "Help request displays clickable phone number for officers",
        "Clicking phone number initiates a call on the officer's device",
        "Call button is prominently displayed on request details"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/HelpRequestCard.tsx",
          "operation": "modify",
          "description": "Add clickable phone number link with tel: protocol to HelpRequestCard component, displaying the citizen's mobile number as a prominent call button that initiates a phone call when clicked on the officer's device"
        }
      ]
    },
    {
      "id": "REQ-9",
      "summary": "Implement messaging system for quick communication between citizens and responding officers",
      "acceptanceCriteria": [
        "Citizens can send text messages to responding officers",
        "Officers can reply to citizen messages",
        "Messages are delivered in real-time",
        "Message history is preserved for each help request"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MessageThread.tsx",
          "operation": "create",
          "description": "Create message thread component displaying chat messages for a specific help request, fetched from backend getMessages method. Show message sender, content, and timestamp. Include message input field and send button that calls backend sendMessage method"
        },
        {
          "path": "frontend/src/hooks/useMessages.ts",
          "operation": "create",
          "description": "Create custom hook wrapping backend getMessages and sendMessage methods, managing message list state with polling for real-time updates, and providing query and mutation functions"
        },
        {
          "path": "frontend/src/pages/RequestDetailPage.tsx",
          "operation": "create",
          "description": "Create request detail page showing full help request information and integrated MessageThread component, accessible to both the citizen who created the request and the assigned officer"
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for RequestDetailPage at '/request/:requestId' with authentication guard ensuring only authorized users (request creator or assigned officer) can access"
        },
        {
          "path": "frontend/src/components/HelpRequestCard.tsx",
          "operation": "modify",
          "description": "Add navigation link or button to HelpRequestCard that routes to the RequestDetailPage for viewing full details and messaging"
        }
      ]
    },
    {
      "id": "REQ-10",
      "summary": "Display quick response indicators and status updates for emergency requests",
      "acceptanceCriteria": [
        "Help request shows status: Sent, Received, Accepted, Responding",
        "Citizens see real-time status updates on their request",
        "Officers can update status as they respond",
        "Status changes trigger notifications"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/StatusBadge.tsx",
          "operation": "create",
          "description": "Create status badge component displaying help request status (pending, accepted, resolved) with color-coded styling for quick visual recognition (e.g., yellow for pending, green for accepted, blue for resolved)"
        },
        {
          "path": "frontend/src/components/HelpRequestCard.tsx",
          "operation": "modify",
          "description": "Integrate StatusBadge component into HelpRequestCard to display current request status prominently"
        },
        {
          "path": "frontend/src/pages/RequestDetailPage.tsx",
          "operation": "modify",
          "description": "Add status timeline or progress indicator showing request lifecycle stages, and for officers, include a 'Mark as Resolved' button that calls backend completeHelpRequest method"
        },
        {
          "path": "frontend/src/hooks/useCompleteHelpRequest.ts",
          "operation": "create",
          "description": "Create custom hook wrapping backend completeHelpRequest method, managing completion state and providing mutation function that accepts requestId"
        }
      ]
    },
    {
      "id": "REQ-11",
      "summary": "Apply professional, trustworthy visual design with urgent yet calming aesthetic suitable for emergency response platform",
      "acceptanceCriteria": [
        "Design uses colors associated with emergency services and safety",
        "Typography is highly legible for quick reading",
        "Layout prioritizes critical actions and information",
        "Visual hierarchy guides users through emergency workflows efficiently"
      ],
      "file_operations": [
        {
          "path": "frontend/src/index.css",
          "operation": "modify",
          "description": "Define global CSS variables for emergency-themed color palette (reds for alerts, blues for trust/police, greens for safety/success, grays for neutral elements), ensure high-contrast color combinations for accessibility, and set base typography with highly legible sans-serif fonts optimized for readability under stress"
        },
        {
          "path": "frontend/tailwind.config.js",
          "operation": "modify",
          "description": "Extend Tailwind theme with custom colors for emergency services (emergency-red, police-blue, safety-green, warning-yellow), configure font families for maximum legibility, and add utility classes supporting the urgent yet calming aesthetic"
        },
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "create",
          "description": "Create layout component establishing consistent page structure with header displaying the safety shield logo, navigation adapted to user role (citizen vs officer), and footer. Apply emergency-appropriate color scheme and ensure critical action buttons are prominently positioned"
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Wrap all routes with Layout component to ensure consistent visual design and navigation across all pages"
        }
      ]
    }
  ]
}