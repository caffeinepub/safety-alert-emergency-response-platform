{
  "kind": "build_request",
  "title": "Fix role assignment error - allow users to self-select roles during registration",
  "projectName": "Safety Alert",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-12",
      "text": "Remove the role-based access control restriction that requires only the author to assign roles, and allow users to self-select their role (citizen or officer) during the registration process",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "It asking roles was not found individual,only author can enrolled roles for accessing that is showing"
        ]
      },
      "acceptanceCriteria": [
        "Users can successfully register as either a citizen or officer without author intervention",
        "The 'roles was not found' error no longer appears during registration",
        "Role selection from the RoleSelector component is properly saved to the user profile",
        "Both citizen and officer users can access their respective dashboards after registration"
      ]
    },
    {
      "id": "REQ-13",
      "text": "Update the user profile creation logic in the backend to accept and store the user's selected role (citizen or officer) from the registration form without requiring special authorization",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "only author can enrolled roles for accessing"
        ]
      },
      "acceptanceCriteria": [
        "The createProfile or equivalent backend method accepts role parameter from any authenticated user",
        "Role is properly stored in the user profile data structure",
        "No authorization check prevents regular users from setting their own role during initial registration"
      ]
    },
    {
      "id": "REQ-14",
      "text": "Verify that the RegistrationForm component correctly passes the selected role to the backend when creating a new user profile",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ]
      },
      "acceptanceCriteria": [
        "The role selected via RoleSelector is included in the profile creation request",
        "Registration completes successfully for both citizen and officer role selections",
        "Users are redirected to the appropriate dashboard based on their selected role"
      ]
    }
  ],
  "constraints": [
    "Maintain the existing dual authentication system for citizens and officers",
    "Do not modify the RoleSelector component UI",
    "Preserve the existing user profile data structure",
    "Keep all existing emergency alert and dashboard functionality intact"
  ],
  "nonGoals": [
    "Adding role change functionality after initial registration",
    "Implementing admin-only role assignment features",
    "Modifying the authentication flow beyond fixing the role assignment issue"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}